/*! MIT License - Copyright (c) 2021 Samarium */
"use strict";(self["webpackChunkmirage_tank_images"]=self["webpackChunkmirage_tank_images"]||[]).push([[18],{3018:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});n(1703);var a=n(6252),r=n(2262),i=n(3577),l=n(320),o=n(4218),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},u=s,c=n(3058);function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){f(e,t,n[t])}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e,t){var n=p({},e,t.attrs);return(0,a.Wm)(c.Z,p({},n,{icon:u}),null)};d.displayName="ToolOutlined",d.inheritAttrs=!1;var v=d,m=n(631),g=n(973),w=n(3925);const y=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),b=Symbol("Comlink.releaseProxy"),k=Symbol("Comlink.thrown"),E=e=>"object"===typeof e&&null!==e||"function"===typeof e,S={canHandle:e=>E(e)&&e[y],serialize(e){const{port1:t,port2:n}=new MessageChannel;return O(e,t),[n,[n]]},deserialize(e){return e.start(),C(e)}},P={canHandle:e=>E(e)&&k in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},_=new Map([["proxy",S],["throw",P]]);function O(e,t=self){t.addEventListener("message",(function n(a){if(!a||!a.data)return;const{id:r,type:i,path:l}=Object.assign({path:[]},a.data),o=(a.data.argumentList||[]).map(z);let s;try{const t=l.slice(0,-1).reduce(((e,t)=>e[t]),e),n=l.reduce(((e,t)=>e[t]),e);switch(i){case"GET":s=n;break;case"SET":t[l.slice(-1)[0]]=z(a.data.value),s=!0;break;case"APPLY":s=n.apply(t,o);break;case"CONSTRUCT":{const e=new n(...o);s=M(e)}break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;O(e,n),s=T(t,[t])}break;case"RELEASE":s=void 0;break;default:return}}catch(u){s={value:u,[k]:0}}Promise.resolve(s).catch((e=>({value:e,[k]:0}))).then((e=>{const[a,l]=Z(e);t.postMessage(Object.assign(Object.assign({},a),{id:r}),l),"RELEASE"===i&&(t.removeEventListener("message",n),L(t))}))})),t.start&&t.start()}function j(e){return"MessagePort"===e.constructor.name}function L(e){j(e)&&e.close()}function C(e,t){return U(e,[],t)}function A(e){if(e)throw new Error("Proxy has been released and is not useable")}function U(e,t=[],n=function(){}){let a=!1;const r=new Proxy(n,{get(n,i){if(A(a),i===b)return()=>D(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{L(e),a=!0}));if("then"===i){if(0===t.length)return{then:()=>r};const n=D(e,{type:"GET",path:t.map((e=>e.toString()))}).then(z);return n.then.bind(n)}return U(e,[...t,i])},set(n,r,i){A(a);const[l,o]=Z(i);return D(e,{type:"SET",path:[...t,r].map((e=>e.toString())),value:l},o).then(z)},apply(n,r,i){A(a);const l=t[t.length-1];if(l===h)return D(e,{type:"ENDPOINT"}).then(z);if("bind"===l)return U(e,t.slice(0,-1));const[o,s]=H(i);return D(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:o},s).then(z)},construct(n,r){A(a);const[i,l]=H(r);return D(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},l).then(z)}});return r}function W(e){return Array.prototype.concat.apply([],e)}function H(e){const t=e.map(Z);return[t.map((e=>e[0])),W(t.map((e=>e[1])))]}const R=new WeakMap;function T(e,t){return R.set(e,t),e}function M(e){return Object.assign(e,{[y]:!0})}function Z(e){for(const[t,n]of _)if(n.canHandle(e)){const[a,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:a},r]}return[{type:"RAW",value:e},R.get(e)||[]]}function z(e){switch(e.type){case"HANDLER":return _.get(e.name).deserialize(e.value);case"RAW":return e.value}}function D(e,t,n){return new Promise((a=>{const r=N();e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===r&&(e.removeEventListener("message",t),a(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:r},t),n)}))}function N(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}const x=C(new Worker(new URL(n.p+n.u(558),n.b)));var F=x,I=n(5263),q=n(1446),G=n(327);const Y=e=>((0,a.dD)("data-v-f25d8904"),e=e(),(0,a.Cn)(),e),B={key:0},X=Y((()=>(0,a._)("div",{class:"ant-upload-text",style:{"margin-top":"0.5em"}},[(0,a.Uk)(" 上传"),(0,a._)("strong",null,"白色背景"),(0,a.Uk)("下显示的图片 ")],-1))),J={key:0},K=Y((()=>(0,a._)("div",{class:"ant-upload-text",style:{"margin-top":"0.5em"}},[(0,a.Uk)(" 上传"),(0,a._)("strong",null,"黑色背景"),(0,a.Uk)("下显示的图片 ")],-1))),Q=["src"],V=["src"];var $=(0,a.aZ)({setup(e){const t=(0,r.iH)(!1),n=(0,r.iH)(!1),s=(0,r.iH)(!1),u=(0,r.iH)(!1),c=(0,r.iH)(),p=(0,r.iH)([]),f=(0,r.iH)([]),d=(0,r.iH)(""),y=(0,r.iH)(!1),h=I.Z.PRESENTED_IMAGE_SIMPLE,b=(0,a.h)(l.Z,{style:{fontSize:"40px"},spin:!0});function k(e){return new Promise(((t,n)=>{const a=new FileReader;e?(a.readAsArrayBuffer(e),a.onload=()=>t(a.result),a.onerror=()=>n(a.error)):n(new Error("no file provided"))}))}function E(e){return new Promise(((t,n)=>{const a=new FileReader;e?(a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=()=>n(a.error)):n(new Error("no file provided"))}))}async function S(e){e.url||e.preview||(e.preview=await E(e.originFileObj)),c.value=e.url||e.preview,u.value=!0}function P(e){"uploading"!==e.file.status?("done"===e.file.status&&(t.value=!1,p.value=e.fileList),"error"===e.file.status&&(t.value=!1,q.ZP.error("upload error"))):t.value=!0}function _(e){"uploading"!==e.file.status?("done"===e.file.status&&(n.value=!1,f.value=e.fileList),"error"===e.file.status&&(n.value=!1,q.ZP.error("upload error"))):n.value=!0}function O(){u.value=!1}async function j(){if(1===p.value.length&&1===f.value.length){const e=p.value[0],t=f.value[0];if("done"===e.status&&"done"===t.status){s.value=!0;const n=await k(e.originFileObj),a=await k(t.originFileObj);F(n,a).then((e=>{d.value=e})).catch((e=>{G.Z.error({title:"错误",content:e.toString(),okText:"确认",closable:!1})})).finally((()=>{s.value=!1}))}}}function L(){y.value=!y.value}return(0,a.bv)((()=>{G.Z.warning({title:"警告",content:"生成器为纯前端，请选择图片大小相同且较小的两张图片来生成",okText:"确认",closable:!1})})),(e,t)=>{const n=(0,a.up)("a-upload"),l=(0,a.up)("a-col"),k=(0,a.up)("a-empty"),C=(0,a.up)("a-spin"),A=(0,a.up)("a-card"),U=(0,a.up)("a-row"),W=(0,a.up)("a-modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(U,{class:"main"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{span:12},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{"file-list":p.value,"onUpdate:file-list":t[0]||(t[0]=e=>p.value=e),accept:"image/png, image/jpeg",name:"top",class:"uploader",action:E,"list-type":"picture-card",onChange:P,onPreview:S},{default:(0,a.w5)((()=>[p.value.length<1?((0,a.wg)(),(0,a.iD)("div",B,[(0,a.Wm)((0,r.SU)(o.Z),{style:{"font-size":"2em"}}),X])):(0,a.kq)("",!0)])),_:1},8,["file-list"]),(0,a.Wm)(n,{"file-list":f.value,"onUpdate:file-list":t[1]||(t[1]=e=>f.value=e),accept:"image/png, image/jpeg",name:"bottom",class:"uploader",action:E,"list-type":"picture-card",onChange:_,onPreview:S},{default:(0,a.w5)((()=>[f.value.length<1?((0,a.wg)(),(0,a.iD)("div",J,[(0,a.Wm)((0,r.SU)(o.Z),{style:{"font-size":"2em"}}),K])):(0,a.kq)("",!0)])),_:1},8,["file-list"])])),_:1}),(0,a.Wm)(l,{span:12},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"result"},{cover:(0,a.w5)((()=>[(0,a._)("div",{class:(0,i.C_)(["container",{black:y.value}])},[d.value||s.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(k,{key:0,image:(0,r.SU)(h),description:"生成结果"},null,8,["image"])),(0,a.Wm)(C,{size:"large",spinning:!d.value&&s.value,tip:"生成中",indicator:(0,r.SU)(b),style:{"margin-top":"30vh"}},null,8,["spinning","indicator"]),d.value?((0,a.wg)(),(0,a.iD)("img",{key:1,src:d.value,alt:"result"},null,8,Q)):(0,a.kq)("",!0)],2)])),actions:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(v),{title:"生成",onClick:j}),y.value?((0,a.wg)(),(0,a.j4)((0,r.SU)(g.Z),{key:1,title:"改变背景颜色",onClick:L})):((0,a.wg)(),(0,a.j4)((0,r.SU)(m.Z),{key:0,title:"改变背景颜色",onClick:L})),(0,a.Wm)((0,r.SU)(w.Z),{title:"下载"})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(W,{visible:u.value,footer:null,style:{top:"0"},onCancel:O},{default:(0,a.w5)((()=>[(0,a._)("img",{alt:"preview",style:{width:"100%"},src:c.value},null,8,V)])),_:1},8,["visible"])],64)}}}),ee=n(3744);const te=(0,ee.Z)($,[["__scopeId","data-v-f25d8904"]]);var ne=te}}]);
//# sourceMappingURL=18.e3392d99.js.map